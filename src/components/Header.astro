---
import Button from "./Button.astro";
import '../styles/global.css';
---

<header class="fixed top-0 w-full z-50 h-16 md:h-20 px-6 md:px-12 xl:px-28 flex justify-between items-center bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-md">
  <!-- Logo -->
  <a href="/" class="flex items-center gap-3 hover:opacity-90 transition-opacity">
    <img 
      src="/logo.png" 
      alt="Logo Conexão Escolar" 
      class="h-10 w-10 md:h-12 md:w-12 object-contain"
      width="48"
      height="48"
      loading="lazy"
    >
    <span class="text-xl md:text-2xl font-bold">Conexão Escolar</span>
  </a>

  <!-- Botão mobile -->
  <button 
    id="navMenuToggler" 
    class="lg:hidden p-3 z-20 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md"
    aria-label="Abrir menu de navegação"
    aria-expanded="false"
    aria-controls="navMenu"
  >
    <span id="menuIcon" aria-hidden="true" class="text-2xl">☰</span>
    <span class="sr-only">Abrir menu</span>
  </button>

  <!-- Menu de navegação -->
  <nav
    id="navMenu"
    class="fixed lg:relative top-16 lg:top-0 left-0 w-full lg:w-auto bg-white dark:bg-gray-900 lg:bg-transparent shadow-lg lg:shadow-none transition-all duration-300 ease-in-out flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-8 p-6 lg:p-0 h-0 lg:h-full overflow-hidden opacity-0 lg:opacity-100 pointer-events-none lg:pointer-events-auto z-10"
    tabindex="-1"
  >
    <div class="flex flex-col lg:flex-row items-center gap-6 lg:gap-8 text-lg">
      <a href="/" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors" onclick="scrollToTop()">Home</a>
      <a href="/blog" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Blog</a>
      <a href="/jogos" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Jogos</a>
      <a href="/#noticias-recentes" class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors">Notícias Recentes</a>
    </div>
    <div class="mt-4 lg:mt-0">
      <Button />
    </div>
  </nav>
</header>

<!-- Scripts -->
<script is:inline>
  function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  document.addEventListener('DOMContentLoaded', () => {
    const toggler = document.getElementById('navMenuToggler');
    const navMenu = document.getElementById('navMenu');
    const menuIcon = document.getElementById('menuIcon');

    if (!toggler || !navMenu || !menuIcon) return;

    toggler.addEventListener('click', () => {
      const isExpanded = toggler.getAttribute('aria-expanded') === 'true';

      navMenu.classList.toggle('h-auto');
      navMenu.classList.toggle('opacity-100');
      navMenu.classList.toggle('pointer-events-auto');
      navMenu.classList.toggle('py-6');

      menuIcon.textContent = isExpanded ? '☰' : '✖';
      toggler.setAttribute('aria-expanded', String(!isExpanded));
    });

    document.querySelectorAll('#navMenu a').forEach(link => {
      link.addEventListener('click', () => {
        if (window.innerWidth < 1024) {
          navMenu.classList.remove('h-auto', 'opacity-100', 'pointer-events-auto', 'py-6');
          menuIcon.textContent = '☰';
          toggler.setAttribute('aria-expanded', 'false');
        }
      });
    });
  });
</script>
