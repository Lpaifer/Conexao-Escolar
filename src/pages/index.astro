---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import "../styles/global.css";
---

<Layout title="Home | CONEX√ÉO ESCOLAR">
  <Header />

  <div class="bg-white dark:bg-black text-gray-900 dark:text-gray-100 transition-colors duration-300">
    <div class="container mx-auto px-4 mt-8">

      <!-- T√≠tulo -->
      <section class="mt-32">
        <h2 class="text-center text-3xl font-bold mb-6">üì∞ Central de Not√≠cias</h2>
        <p class="text-left mx-1 text-lg">
          Aqui voc√™ encontra as √∫ltimas atualiza√ß√µes e informa√ß√µes relevantes sobre o universo da educa√ß√£o. Nossa equipe de redatores especializados trabalha para trazer conte√∫dos aprofundados, atualizados e confi√°veis sobre temas que impactam diretamente o ambiente escolar. Desde inova√ß√µes pedag√≥gicas e pol√≠ticas p√∫blicas at√© quest√µes tecnol√≥gicas e sociais, reunimos tudo em um s√≥ lugar para manter voc√™ bem informado.
        </p>
      </section>

      <!-- Carrossel -->
      <section class="mt-12">
        <div class="swiper mySwiper w-full h-[32rem] md:h-[40rem]">
          <div class="swiper-wrapper h-full">

            <!-- Slide fixo -->
            <div class="swiper-slide h-full">
              <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden flex flex-col transition hover:scale-[1.02] hover:shadow-2xl">
                <img src="/celulares.jpg" alt="Proibi√ß√£o de Celulares nas Escolas" class="w-full h-full md:h-110 object-cover object-center">
                <div class="p-6 flex flex-col flex-grow">
                  <h5 class="text-xl font-bold text-blue-800 dark:text-white mb-3">
                    Proibi√ß√£o de Celulares nas Escolas
                  </h5>
                  <p class="text-gray-700 dark:text-gray-300 mb-6 flex-grow">
                    Entenda o debate sobre o uso de celulares nas escolas e como isso impacta o aprendizado.
                  </p>
                  <a href="https://gustavo-champam.github.io/Proibi-oCelular.github.io/" target="_blank" class="mt-auto inline-block bg-blue-800 text-white px-6 py-2 rounded-full text-center hover:bg-blue-700 transition">
                    Leia mais
                  </a>
                </div>
              </div>
            </div>

            <div class="swiper-slide">
              <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden flex flex-col transition hover:scale-[1.02] hover:shadow-2xl">
                <img src="/hungerfree-banner.jpg" alt="Projeto Hunger-Free" class="w-full h-full md:h-110 object-cover object-center">
                <div class="p-6 flex flex-col flex-grow">
                  <h5 class="text-xl font-bold text-green-700 dark:text-white mb-3">
                    Hunger-Free: Conectando Solidariedade
                  </h5>
                  <p class="text-gray-700 dark:text-gray-300 mb-6 flex-grow">
                    Plataforma social que conecta doadores de alimentos a volunt√°rios que distribuem refei√ß√µes para comunidades em situa√ß√£o de vulnerabilidade.
                  </p>
                <a href="https://hunger-free.vercel.app/" target="_blank" class="mt-auto inline-block bg-blue-800 text-white px-6 py-2 rounded-full text-center hover:bg-blue-700 transition">
                    Visitar Plataforma
                  </a>
                </div>
              </div>
            </div>

            <div class="swiper-slide">
              <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden flex flex-col transition hover:scale-[1.02] hover:shadow-2xl">
                <img src="/alfabetizacao.jpg" alt="Crian√ßa fora da escola" class="w-full h-full md:h-110 object-cover object-center">
                <div class="p-6 flex flex-col flex-grow">
                  <h5 class="text-xl font-bold text-green-700 dark:text-white mb-3">
                    Crian√ßas Fora da Escola
                  </h5>
                  <p class="text-gray-700 dark:text-gray-300 mb-6 flex-grow">
                   Acesse um site completo com dados, causas e solu√ß√µes sobre o abandono escolar no Brasil.
                  </p>
                <a href="https://gustavo-champam.github.io/SiteInformativoEscola.github.io/" target="_blank" class="mt-auto inline-block bg-blue-800 text-white px-6 py-2 rounded-full text-center hover:bg-blue-700 transition">
                    Acessar site
                  </a>
                </div>
              </div>
            </div>

            <div class="swiper-slide h-full">
              <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden flex flex-col transition hover:scale-[1.02] hover:shadow-2xl">
                <img src="/em_breve.jpg" alt="Not√≠cia em breve" class="w-full h-full md:h-110 object-cover object-center">
                <div class="p-6 flex flex-col flex-grow">
                  <h5 class="text-xl font-bold text-blue-800 dark:text-white mb-3">Pr√≥xima not√≠cia em breve</h5>
                  <p class="text-gray-700 dark:text-gray-300 mb-6 flex-grow">Descri√ß√£o da pr√≥xima not√≠cia em breve.</p>
                  <a href="#" class="mt-auto inline-block bg-blue-800 text-white px-6 py-2 rounded-full text-center hover:bg-blue-700 transition">Leia mais</a>
                </div>
              </div>
            </div>

          </div>

          <!-- Controles -->
          <div class="swiper-button-next" aria-label="Pr√≥ximo slide"></div>
          <div class="swiper-button-prev" aria-label="Slide anterior"></div>
          <div class="swiper-pagination"></div>
        </div>
      </section>

      <!-- Not√≠cias da API -->
      <section id=noticias-recentes class="mt-32">
        <h2 class="text-center text-3xl font-bold mb-6">üì∞ Not√≠cias Recentes</h2>
        <p class="text-left mx-1 text-lg">Confira as √∫ltimas not√≠cias sobre educa√ß√£o e tecnologia nas escolas. Esta se√ß√£o √© atualizada frequentemente com base nas publica√ß√µes mais relevantes do momento, garantindo que voc√™ tenha acesso a conte√∫dos atualizados sobre tend√™ncias educacionais, inova√ß√µes tecnol√≥gicas, pol√≠ticas p√∫blicas e tudo o que impacta o ambiente escolar.</p>
        <div id="news-container" class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-8">
          <p class="col-span-full text-center text-gray-500" id="loading-text">Carregando not√≠cias...</p>
        </div>
      </section>

      <!-- Sobre N√≥s -->
      <section class="bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100 p-8 rounded-xl mt-16">
        <h3 class="text-center text-2xl font-bold mb-6">üìö Sobre N√≥s</h3>
        <p class="mb-4">
          A <strong>Central de Not√≠cias Conex√£o Escolar</strong> foi criada com o prop√≥sito de ser uma fonte confi√°vel e acess√≠vel de informa√ß√£o voltada √† educa√ß√£o.
          Nosso compromisso √© oferecer conte√∫dos de qualidade que apoiem educadores, estudantes e gestores escolares na compreens√£o das transforma√ß√µes do cen√°rio educacional.
        </p>
        <ul class="list-disc list-inside mb-4 space-y-1">
          <li>Inova√ß√µes no ensino e metodologias pedag√≥gicas;</li>
          <li>Pol√≠ticas p√∫blicas e reformas educacionais;</li>
          <li>Exames, avalia√ß√µes e indicadores de desempenho;</li>
          <li>Tecnologia e transforma√ß√£o digital nas escolas;</li>
          <li>Projetos de inclus√£o, acessibilidade e equidade educacional.</li>
        </ul>
        <p>
          Com uma equipe dedicada e especializada, nossa miss√£o √© conectar voc√™ √†s informa√ß√µes mais relevantes, promovendo conhecimento, reflex√£o e evolu√ß√£o no ambiente escolar.
        </p>
      </section>
      

  <!-- Swiper CSS (ideal mover para Layout.astro) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />

  <!-- Swiper Script -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js" defer></script>

  <script is:inline>
    document.addEventListener('DOMContentLoaded', () => {
      new Swiper('.mySwiper', {
        loop: true,
        spaceBetween: 30,
        slidesPerView: 1,
        centeredSlides: true,
        autoplay: {
          delay: 5000,
          disableOnInteraction: false,
        },
        pagination: {
          el: '.swiper-pagination',
          clickable: true,
        },
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
      });
    });
  </script>

  <!-- Carregar not√≠cias da API -->
  <script is:inline>
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        const response = await fetch('/api/news');
        const data = await response.json();
        const container = document.getElementById('news-container');
        const loading = document.getElementById('loading-text');

        if (data.status === 'ok' && container) {
          loading.remove();
          data.articles.forEach(article => {
            container.innerHTML += `
              <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden flex flex-col transition hover:scale-[1.02] hover:shadow-2xl">
                <img src="${article.urlToImage || '/em_breve.jpg'}" alt="${article.title}" class="w-full h-48 object-cover object-center">
                <div class="p-6 flex flex-col flex-grow">
                  <h5 class="text-xl font-bold text-blue-800 dark:text-white mb-2">${article.title}</h5>
                  <p class="text-gray-700 dark:text-gray-300 flex-grow">${article.description || ''}</p>
                  <a href="${article.url}" target="_blank" class="mt-4 inline-block bg-blue-800 text-white px-6 py-2 rounded-full text-center hover:bg-blue-700 transition">Leia mais</a>
                </div>
              </div>`;
          });
        } else {
          loading.textContent = "Nenhuma not√≠cia dispon√≠vel no momento.";
        }
      } catch (error) {
        console.error('Erro ao carregar not√≠cias:', error);
        document.getElementById('loading-text').textContent = "Erro ao carregar not√≠cias.";
      }
    });
  </script>
</Layout>
