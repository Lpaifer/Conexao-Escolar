---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import "../styles/global.css";
import Button from "../components/Button.astro";
---

<Layout title="Home | CONEX√ÉO ESCOLAR">
  <Header />

  <Button />

  <div class="bg-white dark:bg-black text-gray-900 dark:text-gray-100 transition-colors duration-300">
    <div class="container mx-auto px-4 mt-8">

      <!-- T√≠tulo -->
      <section class="mt-15">
        <h2 class="text-center text-3xl font-bold mb-6">üì∞ Central de Not√≠cias</h2>
        <p class="text-left mx-1 text-lg">
          Aqui voc√™ encontra as √∫ltimas atualiza√ß√µes e informa√ß√µes relevantes sobre o universo da educa√ß√£o. Nossa equipe de redatores especializados trabalha para trazer conte√∫dos aprofundados, atualizados e confi√°veis sobre temas que impactam diretamente o ambiente escolar. Desde inova√ß√µes pedag√≥gicas e pol√≠ticas p√∫blicas at√© quest√µes tecnol√≥gicas e sociais, reunimos tudo em um s√≥ lugar para manter voc√™ bem informado.
        </p>
      </section>

      <!-- Carrossel -->
 <section class="mt-12 relative">
  <div class="swiper mySwiper w-full aspect-[16/9] max-h-[600px] rounded-2xl overflow-hidden">
    <div class="swiper-wrapper">

      <!-- Slide 1 -->
      <div class="swiper-slide relative group">
        <img src="/celulares.jpg" alt="Proibi√ß√£o de Celulares nas Escolas" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" loading="lazy" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent z-10"></div>
        <div class="absolute bottom-0 p-6 z-20 text-white max-w-xl">
          <h5 class="text-2xl font-bold mb-2">Proibi√ß√£o de Celulares nas Escolas</h5>
          <p class="text-sm mb-4">Entenda o debate sobre o uso de celulares nas escolas e como isso impacta o aprendizado.</p>
          <a href="https://gustavo-champam.github.io/Proibi-oCelular.github.io/" target="_blank" class="inline-block bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-full font-semibold transition">Leia mais</a>
        </div>
      </div>

      <!-- Slide 2 -->
      <div class="swiper-slide relative group">
        <img src="/hungerfree-banner.jpg" alt="Projeto Hunger-Free" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" loading="lazy" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent z-10"></div>
        <div class="absolute bottom-0 p-6 z-20 text-white max-w-xl">
          <h5 class="text-2xl font-bold mb-2">Hunger-Free: Conectando Solidariedade</h5>
          <p class="text-sm mb-4">Conecta doadores a volunt√°rios que distribuem refei√ß√µes a comunidades vulner√°veis.</p>
          <a href="https://hunger-free.vercel.app/" target="_blank" class="inline-block bg-blue-600 hover:bg-green-500 text-white px-4 py-2 rounded-full font-semibold transition">Visitar Plataforma</a>
        </div>
      </div>

      <!-- Slide 3 -->
      <div class="swiper-slide relative group">
        <img src="/alfabetizacao.jpg" alt="Crian√ßa fora da escola" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" loading="lazy" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent z-10"></div>
        <div class="absolute bottom-0 p-6 z-20 text-white max-w-xl">
          <h5 class="text-2xl font-bold mb-2">Crian√ßas Fora da Escola</h5>
          <p class="text-sm mb-4">Site com dados e solu√ß√µes sobre abandono escolar no Brasil.</p>
          <a href="https://gustavo-champam.github.io/SiteInformativoEscola.github.io/" target="_blank" class="inline-block bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-full font-semibold transition">Acessar Site</a>
        </div>
      </div>

      <!-- Slide 4 -->
      <div class="swiper-slide relative group">
        <img src="/bullying.jpg" alt="Violencia nas escolas" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" loading="lazy" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent z-10"></div>
        <div class="absolute bottom-0 p-6 z-20 text-white max-w-xl">
          <h5 class="text-2xl font-bold mb-2">Viol√™ncia nas escolas do Brasil</h5>
          <p class="text-sm mb-4">Um retrato alarmante que exige aten√ß√£o e a√ß√£o: conhe√ßa os tipos, impactos e casos mais recentes de viol√™ncia no ambiente escolar.</p>
          <a href="https://gustavo-champam.github.io/SiteInformativoViolencia.github.io/" target="_blank" class="inline-block bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-full font-semibold transition">Acessar Site</a>
        </div>
      </div>

    </div>
  </div>

  <button
    id="custom-prev"
    class="absolute left-2 md:left-4 top-1/2 -translate-y-1/2 z-30 bg-white/70 dark:bg-black/70 hover:scale-110 p-2 md:p-2.5 rounded-full shadow-md transition"
    aria-label="Slide anterior"
  >
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-blue-600">
      <path stroke-linecap="round" stroke-linejoin="round" d="M21 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061A1.125 1.125 0 0 1 21 8.689v8.122ZM11.25 16.811c0 .864-.933 1.406-1.683.977l-7.108-4.061a1.125 1.125 0 0 1 0-1.954l7.108-4.061a1.125 1.125 0 0 1 1.683.977v8.122Z" />
    </svg>
  </button>

  <button
    id="custom-next"
    class="absolute right-2 md:right-4 top-1/2 -translate-y-1/2 z-30 bg-white/70 dark:bg-black/70 hover:scale-110 p-2 md:p-2.5 rounded-full shadow-md transition"
    aria-label="Pr√≥ximo slide"
  >
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-blue-600">
      <path stroke-linecap="round" stroke-linejoin="round" d="M3 8.689c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061A1.125 1.125 0 0 1 3 16.811V8.69ZM12.75 8.689c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061a1.125 1.125 0 0 1-1.683-.977V8.69Z" />
    </svg>
  </button>
</section>

      <!-- Not√≠cias da API -->
      <section id=noticias-recentes class="mt-32">
        <h2 class="text-center text-3xl font-bold mb-6">üì∞ Not√≠cias Recentes</h2>
        <p class="text-left mx-1 text-lg">Confira as √∫ltimas not√≠cias sobre educa√ß√£o e tecnologia nas escolas. Esta se√ß√£o √© atualizada frequentemente com base nas publica√ß√µes mais relevantes do momento, garantindo que voc√™ tenha acesso a conte√∫dos atualizados sobre tend√™ncias educacionais, inova√ß√µes tecnol√≥gicas, pol√≠ticas p√∫blicas e tudo o que impacta o ambiente escolar.</p>
        <div id="news-container" class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-8">
          <p class="col-span-full text-center text-gray-500" id="loading-text">Carregando not√≠cias...</p>
        </div>
      </section>

      <!-- Sobre N√≥s -->
      <section class="bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100 p-8 rounded-xl mt-16">
        <h3 class="text-center text-2xl font-bold mb-6">üìö Sobre N√≥s</h3>
        <p class="mb-4">
          A <strong>Central de Not√≠cias Conex√£o Escolar</strong> foi criada com o prop√≥sito de ser uma fonte confi√°vel e acess√≠vel de informa√ß√£o voltada √† educa√ß√£o.
          Nosso compromisso √© oferecer conte√∫dos de qualidade que apoiem educadores, estudantes e gestores escolares na compreens√£o das transforma√ß√µes do cen√°rio educacional.
        </p>
        <ul class="list-disc list-inside mb-4 space-y-1">
          <li>Inova√ß√µes no ensino e metodologias pedag√≥gicas;</li>
          <li>Pol√≠ticas p√∫blicas e reformas educacionais;</li>
          <li>Exames, avalia√ß√µes e indicadores de desempenho;</li>
          <li>Tecnologia e transforma√ß√£o digital nas escolas;</li>
          <li>Projetos de inclus√£o, acessibilidade e equidade educacional.</li>
        </ul>
        <p>
          Com uma equipe dedicada e especializada, nossa miss√£o √© conectar voc√™ √†s informa√ß√µes mais relevantes, promovendo conhecimento, reflex√£o e evolu√ß√£o no ambiente escolar.
        </p>
      </section>
      

  <!-- Swiper CSS (ideal mover para Layout.astro) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />

  <!-- Swiper Script -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js" defer></script>

<script is:inline>
  let swiper;
  document.addEventListener('DOMContentLoaded', () => {
    swiper = new Swiper('.mySwiper', {
      loop: true,
      spaceBetween: 30,
      slidesPerView: 1,
      centeredSlides: true,
      autoplay: {
        delay: 5000,
        disableOnInteraction: false,
      },
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
    });

    // Conectar os bot√µes personalizados
    document.getElementById('custom-prev').addEventListener('click', () => swiper.slidePrev());
    document.getElementById('custom-next').addEventListener('click', () => swiper.slideNext());
  });
</script>

  <!-- Carregar not√≠cias da API -->
<script is:inline>
  document.addEventListener('DOMContentLoaded', async () => {
    const container = document.getElementById('news-container');
    const loading = document.getElementById('loading-text');

    try {
      // Requisi√ß√µes paralelas
      const [newsRes, gnewsRes, mediastackRes] = await Promise.all([
        fetch('/api/news'),
        fetch('/api/gnews'),
        fetch('/api/mediastack')
      ]);

      const newsData = await newsRes.json();
      const gnewsData = await gnewsRes.json();
      const mediastackData = await mediastackRes.json();

      const articles = [
        ...(newsData.articles || []),
        ...(gnewsData.articles || []),
        ...(mediastackData.articles || [])
      ];

      if (articles.length > 0 && container) {
        loading.remove();

        articles.forEach(article => {
          const image = article.urlToImage || article.image || null;
          const title = article.title || 'Sem t√≠tulo';
          const description = article.description || article.content || 'Sem descri√ß√£o';
          const url = article.url || '#';

          container.innerHTML += `
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden flex flex-col transition hover:scale-[1.02] hover:shadow-2xl">
              <img src="${image}" alt="${title}" class="w-full h-48 object-cover object-center">
              <div class="p-6 flex flex-col flex-grow">
                <h5 class="text-xl font-bold text-blue-800 dark:text-white mb-2">${title}</h5>
                <p class="text-gray-700 dark:text-gray-300 flex-grow">${description}</p>
                <a href="${url}" target="_blank" class="mt-4 inline-block bg-blue-800 text-white px-6 py-2 rounded-full text-center hover:bg-blue-700 transition">Leia mais</a>
              </div>
            </div>`;
        });
      } else {
        loading.textContent = "Nenhuma not√≠cia dispon√≠vel no momento.";
      }
    } catch (error) {
      console.error('Erro ao carregar not√≠cias:', error);
      loading.textContent = "Erro ao carregar not√≠cias.";
    }
  });
</script>
</Layout>
